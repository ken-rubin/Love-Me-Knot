(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{initMap:()=>a});let n=!0;function a(){const e=document.getElementById("map");document.getElementById("MapButton")?.addEventListener("click",(()=>{const t=e?.classList.contains("hidden");console.log(t),t?(e?.classList.remove("hidden"),n&&(n=!1,navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};var n=new google.maps.LatLngBounds;n.extend({lat:41.237507629670944,lng:-73.3964314082411}),n.extend(t),r.fitBounds(n),u.geocode({address:"33 Pent Rd, Weston, CT 06883"}).then((e=>{const{results:n}=e;var a={origin:t,destination:n[0].geometry.location,travelMode:google.maps.TravelMode.DRIVING};c.route(a,((e,t)=>{"OK"==t&&p.setDirections(e)}))})).catch((e=>{alert("Geocode was not successful for the following reason: "+e)}))}),(()=>{})))):e?.classList.add("hidden")}));let t=[],a=[{lat:41.239560541203865,lng:-73.39134439917926},{lat:41.239384788295496,lng:-73.3912635849484},{lat:41.23916696066689,lng:-73.39119384751402},{lat:41.238977369362196,lng:-73.39124749169432},{lat:41.23881198075364,lng:-73.3912635849484},{lat:41.238735337110214,lng:-73.39125285611235,marker:!0,label:"25",message:"turn left, head north along the pond to the clearing"},{lat:41.23880391300593,lng:-73.39166055188261,marker:!0,label:"24",message:"turn right"},{lat:41.238525575100134,lng:-73.3920736120709},{lat:41.23853767677287,lng:-73.39239547715269,marker:!0,label:"23",message:"turn left off the main path"},{lat:41.238578015665766,lng:-73.39262078270994},{lat:41.23855381233301,lng:-73.39292655453764},{lat:41.238473134492445,lng:-73.3932269619473},{lat:41.23833194803182,lng:-73.39335570798002},{lat:41.23799058050354,lng:-73.39337716565214},{lat:41.23778081610329,lng:-73.39351664052091},{lat:41.237619458414265,lng:-73.39376340375028},{lat:41.237409692822986,lng:-73.39408526883207},{lat:41.23725640215749,lng:-73.39443932042204},{lat:41.23711924704677,lng:-73.39478264317594},{lat:41.2371,lng:-73.39525471196256},{lat:41.23715,lng:-73.39581727981567,marker:!0,label:"Entrance",message:"enter path from parking lot to the east, continue until marker 23"}];const o=new google.maps.InfoWindow,l=(e,t)=>{google.maps.event.addListener(e,"click",(()=>{o.setContent(t),o.open(r,e)}))},s={max:{lat:Number.MIN_SAFE_INTEGER,lng:Number.MIN_SAFE_INTEGER},min:{lat:Number.MAX_SAFE_INTEGER,lng:Number.MAX_SAFE_INTEGER}},i=a.reduce(((e,t)=>({max:{lat:Math.max(e.max.lat,t.lat),lng:Math.max(e.max.lng,t.lng)},min:{lat:Math.min(e.min.lat,t.lat),lng:Math.min(e.min.lng,t.lng)}})),s),g={lat:(i.max.lat+i.min.lat)/2,lng:(i.max.lng+i.min.lng)/2},r=new google.maps.Map(document.getElementById("map"),{zoom:14,mapTypeId:google.maps.MapTypeId.HYBRID,center:g}),m=new google.maps.Marker({position:{lat:41.239560541203865,lng:-73.39134439917926},icon:"./55.png",map:r,animation:google.maps.Animation.DROP,zIndex:2});l(m,"Rings mark the spot!");let d=new google.maps.Polyline({path:a,geodesic:!0,strokeColor:"#EEFF99",strokeOpacity:1,strokeWeight:3,icons:[{icon:{path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW},offset:"100%"}]});d.setMap(r),setInterval((()=>{let e=100-(new Date).getTime()%2e4/2e4*100;const t=d.get("icons");t[0].offset=`${e}%`,d.set("icons",t)}),50);let c=new google.maps.DirectionsService,p=new google.maps.DirectionsRenderer;p.setMap(r);let u=new google.maps.Geocoder;const h=()=>{t.forEach((e=>{e.setMap(null)})),t=[],a.forEach((e=>{if(e.marker){const n=new google.maps.Marker({position:e,map:r,label:e.label,animation:google.maps.Animation.DROP});e.message&&l(n,e.message),t.push(n)}}));const e=new google.maps.Marker({position:{lat:41.24126582513925,lng:-73.38364621526185},map:r,label:"home",animation:google.maps.Animation.DROP});l(e,"our home in Weston"),t.push(e);const n=new google.maps.Marker({position:{lat:41.237507629670944,lng:-73.3964314082411},map:r,label:"X",animation:google.maps.Animation.DROP});l(n,"oddly, this part of Pent Road does not exist!  Please disregard.  Avoid driving into the woods!"),t.push(n)};h();let f=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).edit;const y=document.getElementById("points");f&&y?(y.value=JSON.stringify(a,null,2),y.addEventListener("input",(e=>{try{a=JSON.parse(y.value),d.setPath(a),h()}catch{}})),r.addListener("click",(e=>{a.push(JSON.parse(JSON.stringify(e.latLng))),d.setPath(a),h(),y.value=JSON.stringify(a,null,2)}))):y&&y.classList.add("hidden");const v=()=>{let e=r.getZoom();for(let n=0;n<t.length;n++)t[n].setVisible(e>15)};setTimeout(v,1e3),google.maps.event.addListener(r,"zoom_changed",v)}var o=window;for(var l in t)o[l]=t[l];t.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();